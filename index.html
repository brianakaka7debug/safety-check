<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Big Island Safety Check Finder</title>
  <!-- Preload hero image for faster first paint -->
  <link rel="preload" as="image" href="lava-texture.jpg">
  <!-- Critical CSS (just the first viewport) is inlined via <style>. 
       The rest sits in style.css so browsers can cache it aggressively. -->
  <style>
    :root{
      --brand-teal:#28a391;
      --font-light:#ffffff;
      --font-dark:#1e1e1e;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font:16px/1.5 system-ui,Segoe UI,Helvetica,Arial,sans-serif;color:var(--font-dark);}
    .hero{
      background:
        linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.65)),
        url('lava-texture.jpg') center 45%/cover no-repeat;
      color:var(--font-light);
      text-align:center;
      padding:18vh 1rem 12vh;
    }
    .hero h1{font-size:clamp(2rem,5vw,3rem);margin-bottom:.75em;}
    .hero p{max-width:42ch;margin:0 auto 2.2em;font-size:1.15rem;}
    .cta{
      background:var(--brand-teal);
      color:#fff;border:0;border-radius:8px;
      padding:1rem 2.6rem;font-size:1.125rem;
      cursor:pointer;transition:filter .2s;
    }
    .cta:hover{filter:brightness(1.1);}
  </style>
  <!--  Main stylesheet (everything below the fold)  -->
  <link rel="stylesheet" href="style.css">
  <!-- Leaflet CSS for maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
  <header class="hero">
    <h1>Find Safety Check Stations<br>on Hawai'i Island</h1>
    <p>A free community resource to help locals and visitors easily find certified safety inspection stations across the Big Island. Get your annual vehicle safety check done quickly and conveniently.</p>
    <button class="cta" id="locateBtn" type="button">Get&nbsp;My&nbsp;Location</button>
    <div id="status" hidden>Finding nearby safety check stations‚Ä¶</div>
    <div style="margin-top: 2rem; font-size: 0.9rem; opacity: 0.9;">
      Questions or suggestions? Contact us at <a href="mailto:akakabrian19@gmail.com" style="color: var(--font-light); text-decoration: underline;">akakabrian19@gmail.com</a>
    </div>
  </header>
  <section id="results" hidden>
    <div id="map"></div>
    <h3>Nearest Safety Check Stations</h3>
    <div id="stationList"></div>
  </section>
  <!-- Leaflet JavaScript for maps -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Your logic, loaded last with defer so it never blocks rendering -->
    L.marker([station.lat, station.lng], { icon: stationIcon })
      .addTo(map)
      .bindPopup(`
        <div style="
          background: white;
          border-radius: 8px;
          padding: 16px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          border: none;
          font-family: system-ui, -apple-system, sans-serif;
          min-width: 220px;
        ">
          <h3 style="
            color: #333; 
            font-size: 16px; 
            margin: 0 0 12px 0;
            font-weight: 600;
            line-height: 1.3;
          ">${station.name}</h3>
          <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(station.address)}" 
             target="_blank"
             style="
               color: #28a391;
               text-decoration: none;
               font-weight: 500;
               padding: 8px 12px;
               border-radius: 6px;
               background: rgba(40, 163, 145, 0.1);
               display: block;
               margin-bottom: 8px;
               font-size: 14px;
               line-height: 1.4;
               text-align: center;
               transition: background 0.2s ease;
             "
             onmouseover="this.style.background='rgba(40, 163, 145, 0.2)'"
             onmouseout="this.style.background='rgba(40, 163, 145, 0.1)'">
            üìç ${station.address}
          </a>
          <a href="tel:${station.phone.replace(/[^\d]/g, '')}"
             style="
               color: #28a391;
               text-decoration: none;
               font-weight: 600;
               padding: 10px 16px;
               border-radius: 6px;
               background: rgba(40, 163, 145, 0.1);
               display: block;
               font-size: 14px;
               text-align: center;
               transition: background 0.2s ease;
             "
             onmouseover="this.style.background='rgba(40, 163, 145, 0.2)'"
             onmouseout="this.style.background='rgba(40, 163, 145, 0.1)'">
            üìû ${station.phone}
          </a>
        </div>
      `, {
        className: 'custom-popup'
      });
</body>
</html>